Teacher.checkBoxDL=function(id){var _dtInput=$(id).find("dt input");_dtInput.click(function(){var _this=$(this).parent().parent().next().find("input");"checked"==$(this).attr("checked")?_this.attr("checked",!0):_this.attr("checked",!1)})},Teacher.paper.intelligent={submitBtn:$("#intelligent_submit"),questionList:$(".question-list"),typeList:$(".typelist"),init:function(){this.submitBtn.click(function(){Teacher.paper.intelligent.submit_select()}),this.questionList.on("click",".question-content",function(){var this_a=this;$(this_a).find(".answer").toggle()}),this.questionList.on("click",".control-btn",function(){var this_a=this;Teacher.paper.paper_question.addQuestionClick(this_a)}),this.questionList.on("click",".all_in",function(event){return event.stopPropagation(),Teacher.paper.paper_question.addQuestionsClick(),!1}),this.questionList.on("click",".change-btn",function(){var this_a=this;Teacher.paper.intelligent.change_question(this_a)}),Teacher.paper.paper_common.randerQuestion=Teacher.paper.intelligent.randerQuestion,Teacher.paper.intelligent.selects(".typelist"),Teacher.paper.intelligent.scrollFn()},randerQuestion:function(){if($(".question-box").length>0){this_a=Teacher.paper.intelligent;var page_num=$(".page").find(".active").html();void 0==page_num&&(page_num=1),this_a.page(page_num,!0)}},selects:function(_id){$(_id).on("change","select",function(event){event.stopPropagation();$(this).text();if($(this).find("option:selected").attr("value")){var _val=$(this).find("option:selected").attr("value");$(this).prev("input").attr("value",_val)}var papersum=0;$(".paperValSum").each(function(){papersum+=parseInt($(this).val())}),papersum>99?($.tiziDialog({content:"一张试卷只能加入99道题目，请控制题目数量。"}),$("#intelligent_submit").addClass("BtnDisabled")):$("#intelligent_submit").removeClass("BtnDisabled")})},submit_select:function(){if(-1!=$("#intelligent_submit").attr("class").indexOf("BtnDisabled"))return!1;var sid=$(".subject-chose").data("subject"),typelist=this.get_typeList(),categorylist=this.get_categoryList(),cid=$(".category_root").find("input").attr("data-id"),difficult=$("#selectDifNum").html(),paperValSum=$(".paperValSum").val();paperValSum>99?$.tiziDialog({content:"一张试卷只能加入99道题目，请控制题目数量。"}):""==typelist?$.tiziDialog({content:"请选择题型数量,题型数量不能为0"}):""==categorylist?$.tiziDialog({content:"请选择知识点，知识点不能为空"}):(Common.floatLoading.showFloatLoading(),$.tizi_ajax({type:"GET",dataType:"json",url:baseUrlName+"paper/"+baseNameSpace+"_intelligent/select",data:{sid:sid,typelist:typelist,cids:categorylist,cid:cid,diff:difficult,ver:(new Date).valueOf()},success:function(data){Common.floatLoading.hideFloatLoading(),1==data.errorcode?($(".question-list").html(data.html),Teacher.paper.intelligent.auto_height()):$.tiziDialog({content:data.error})}}))},get_typeList:function(){var typelist="";return $(".typelist").each(function(){0!=$(this).find("input").val()&&(typelist+=","+$(this).find("select").attr("id")+"-"+$(this).find("input").val())}),typelist=typelist.substr(1)},get_categoryList:function(){var cids="";return $("input[name='categorylist']:checkbox:checked").each(function(){cids+=","+$(this).val()}),cids=cids.substr(1)},page:function(page,noloading){1!=noloading&&($(".all_in").removeClass("all_in").addClass("all_in_2"),Common.floatLoading.showLoading());var sid=$(".subject-chose").data("subject"),diff=$(".diff").attr("difficult");$.tizi_ajax({type:"GET",dataType:"json",url:baseUrlName+"paper/"+baseNameSpace+"_intelligent/get_question",data:{sid:sid,diff:diff,page:page,ver:(new Date).valueOf()},success:function(data){$(".all_in_2").removeClass("all_in_2").addClass("all_in"),Common.floatLoading.hideLoading(),1==data.errorcode?($(".question-list").html(data.html),Teacher.paper.intelligent.auto_height()):$.tiziDialog({content:data.error})}})},change_question:function(this_a){if(!$(this_a).hasClass("disabled")){$(".all_in").removeClass("all_in").addClass("all_in_2"),$(this_a).addClass("disabled");var sid=$(".subject-chose").data("subject"),cid=$(this_a).attr("data-category_id"),qtype=$(this_a).attr("data-qtype_id"),diff=$(".diff").attr("difficult"),qid=$(this_a).attr("data-question_id"),qids=new Array;$(".question-list").find(".question-box").each(function(i,e){qids.push($(e).attr("data-question_id"))}),$(this_a).parents(".question-intelligent-item").attr("id","question-intelligent-item-"+qid),$.tizi_ajax({type:"GET",dataType:"json",url:baseUrlName+"paper/"+baseNameSpace+"_intelligent/change_question",data:{sid:sid,cid:cid,qids:qids,qid:qid,qtype:qtype,diff:diff,ver:(new Date).valueOf()},success:function(data){$(".all_in_2").removeClass("all_in_2").addClass("all_in"),$("#question-intelligent-item-"+qid).find(".change-btn").removeClass("disabled"),1==data.errorcode?($("#question-intelligent-item-"+qid).html(data.html),$("#question-intelligent-item-"+qid).removeAttr("id"),Teacher.paper.intelligent.auto_height()):$.tiziDialog({content:data.error})}})}},auto_height:function(){$(".paperDetails").css("height",$(window).height()-$(".allPaper .path").height()-$(".page").height()-92).css("overflow","auto"),$(".mainContainer").css("height",$(window).height()-$(".allPaper .path").height()-$(".page").height()-42).css("overflow-y","hidden")},scrollFn:function(){var isScrolled=!1,startX=0,startLevel=0;$("#diy_dot").mousedown(function(e){isScrolled||(isScrolled=!0,startX=e.clientX,startLevel=e.target.offsetLeft+5)}),$("#diy_dot").mouseup(function(e){isScrolled=!1,startLevel=e.target.offsetLeft+5}),$(document).mousemove(function(e){if(isScrolled){var t=e.clientX-startX,n=startLevel+t;n=n>100?100:n,n=0>n?0:n,100>=n&&n>=0&&($("#diy_scroll_left").width(n+"px"),$("#diy_scroll_right").width(100-n+"px"),$("#diy_dot").attr("style","left:"+(n-5)+"px")),$("#selectDifNum").html((n/100).toFixed(2))}}),$(document).mouseup(function(){isScrolled=!1}),$(document).mouseup(function(){isScrolled=!1})}};