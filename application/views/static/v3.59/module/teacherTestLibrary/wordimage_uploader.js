define("module/teacherTestLibrary/wordimage_uploader",[],function(require,exports){exports.checkJRE=function(){try{if(document.getElementById("wordImageApplet").isActive())return 1}catch(error){return 0}},exports.WordImageUploader=function(s_url,appletUrl){if("undefined"==typeof appletUrl)return"";var _this=this,sUrl=baseUrlName+"upload/uques",init=function(){sUrl=s_url},printRequiredHtml11=function(){var xx='<div id="word_image_container_temp" style="display:none;"></div>',yy1='<div id="wordImageAppletWrapper" style="height: 22px;background-color: #f2f1f1;border-top: 1px solid gray;position:fixed; bottom:0;left:0; width:100%; overflow: hidden;z-index:1000;" > ',yy2='<applet style="visible:hidden;" id="wordImageApplet" name="wordImageApplet" code="com.tizi.applet.imageuploader.UploaderApplet" archive="'+appletUrl+'js/tools/java_applet/uploader.jar" width="0" height="0"></applet>',yy3="</div>";document.write(xx),document.write(yy1),document.write(yy2),document.write(yy3)};init(),printRequiredHtml11();var cjj=exports.checkJRE();1!=cjj&&$(".ckEdTip").show(),_this.uploadWordImagesFromCKEditor=function(editorInstance){alert(1);var cj=checkJRE();if(1!=cj)return 0;var ed=editorInstance,txt=ed.getData(),txt0=txt;$("#word_image_container_temp").html(txt),$(".ckEdTip").hide();var i=0;if($("#word_image_container_temp img").each(function(){var src=$(this).attr("src");if(-1!=src.indexOf("file:///")){var srct=src.replace("file:///",""),serverPath=_this.uploadLocalFile(srct);"error"!=serverPath?txt=txt.replace(src,serverPath):i++}}),txt0!=txt&&(ed.setData(txt),i>0)){var tipHtml='<span style="color:#E94729;">提示：您有'+i+"张图片上传失败，请重新尝试！</span>";$(".ckEdTip").html(tipHtml),$(".ckEdTip").show().css({padding:"5px"})}},_this.uploadLocalFile=function(filename){var token=basePageToken,page_name=basePageName,appletObj=document.getElementById("wordImageApplet"),result=appletObj.upload(sUrl,filename,page_name,token,$.cookies.get(baseSessID));return result}}});