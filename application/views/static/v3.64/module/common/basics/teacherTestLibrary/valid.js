define("module/common/basics/teacherTestLibrary/valid",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/Validform/5.3.2/Validform","module/common/ajax/teacherTestLibrary/validAjax"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/Validform/5.3.2/Validform");var _validAjax=require("module/common/ajax/teacherTestLibrary/validAjax");exports.addNewGroupValid=function(){var _Form=$(".addDocForm").Validform({tiptype:3,showAllError:!1,ajaxPost:!0,beforeSubmit:function(){},callback:function(data){_validAjax.addNewGroupValidAjax(data)}});_Form.addRule([{ele:".group_name",datatype:"*2-20",nullmsg:"分组名称不能为空",errormsg:"请输入2-20个字符"}])},exports.EditNewGroupValid=function(that){var _Form=$(".editDocForm").Validform({tiptype:3,showAllError:!1,ajaxPost:!0,beforeSubmit:function(){},callback:function(data){_validAjax.EditNewGroupValidAjax(data,that)}});_Form.addRule([{ele:".group_name",datatype:"*2-20",nullmsg:"分组名称不能为空",errormsg:"请输入2-20个字符"}])},exports.uploadQuesValid={init:function(){this.myQuestion()},myQuestion:function(){var _Form=$(".form_qList").Validform({tiptype:3,showAllError:!1,ajaxPost:!0,beforeSubmit:function(){},callback:function(data){_validAjax.uploadQuesAjax.myQuestion(data)}});_Form.addRule([{ele:".s_grade",datatype:"*",nullmsg:"请选择学段"},{ele:".s_subject",datatype:"*",nullmsg:"请选择学科"},{ele:".s_qtype",datatype:"*",nullmsg:"请选择题型"},{ele:".source",datatype:"*",nullmsg:"请输入题目/来源"}])},myGroupTipForm:function(obj){var _Form=$(".myGroupTipForm").Validform({tiptype:3,showAllError:!1,ajaxPost:!0,beforeSubmit:function(){},callback:function(data){_validAjax.uploadQuesAjax.myGroupTipForm(data,obj)}});_Form.config({tiptype:3}),_Form.addRule([{ele:".s_newSubject",datatype:"*",nullmsg:"请选择学科"},{ele:".s_GroupName",datatype:"*1-20",nullmsg:"请选择分组名称",errormsg:"长度1-20字符之间"}])}}}),define("module/common/ajax/teacherTestLibrary/validAjax",[],function(require,exports){exports.addNewGroupValidAjax=function(data){if(0==data.error_code)$.tiziDialog({content:data.error});else{var group_name=data.new_name,bindUrl=baseUrlName+"teacher/user/myquestion/g/"+data.error,doc_str='<tr><td class="questionGrop group-name"><a href="'+bindUrl+'" data-gid="'+data.error+'">'+group_name+'</a></td><td class="paperNum">0 道</td><td class="operation"><a href="javascript:void(0)" data-gid="'+data.error+'" class="edit_doc">编辑</a>&nbsp;<a href="javascript:void(0)" class="del_doc">删除</a></td></tr>';$(doc_str).insertAfter(".grop_list tbody tr:eq(1)"),$.tiziDialog.list.AddDocForm.close()}},exports.EditNewGroupValidAjax=function(data,that){var ele=that;0==data.error_code?$.tiziDialog({content:data.error}):(ele.parents("tr").find(".group-name").find("a").text(data.new_group_name),art.dialog.list.EditDocForm.close())},exports.uploadQuesAjax={myQuestion:function(data){if(data.error_code){var type=data.type,title="insert"==type?"继续上传":"继续编辑";$.tiziDialog({content:data.error,okVal:title,cancelVal:"查看我的试题",ok:function(){this.close(),"insert"==type&&(window.location.href=baseUrlName+"teacher/user/myquestion/new")},cancel:function(){var optionId=$(".s_subject option:selected").val();window.location.href=baseUrlName+"teacher/user/myquestion/"+optionId}})}else $.tiziDialog({content:data.error})},myGroupTipForm:function(data,obj){var oldGroup=obj.parent().find(".s_Group");if(data.error_code){var newGroupName=data.new_name,newGroupID=data.error,newOption='<option value ="'+newGroupID+'" selected="selected">'+newGroupName+"</option>";oldGroup.removeAttr("selected"),oldGroup.append(newOption),$.tiziDialog.list.tmpGroupTipId.close()}else $.tiziDialog({content:data.error})}}});