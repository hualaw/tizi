define("module/mobile/mobileLogin/mobileLogin",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/Validform/5.3.2/Validform","lib/cookies/0.0.1/jquery.cookies","lib/tizi_common/0.0.1/tizi_datatype","lib/tizi_common/0.0.1/tizi_valid","tizi_ajax","tiziDialog","validForm","tizi_datatype","tizi_validform"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/Validform/5.3.2/Validform"),require("lib/cookies/0.0.1/jquery.cookies");require("lib/tizi_common/0.0.1/tizi_datatype").dataType();exports.mobileLogin=function(){require("lib/tizi_common/0.0.1/tizi_valid").indexLogin()},exports.loginInPC=function(){$(".loginInPC").on("click",function(){$(this).data("url");$.cookies.set("_mobile","0"),0==$.cookies.get("_mobile")&&window.location.reload()})},exports.loginRefresh=function(){$(".loginAreaBefore").length>0&&(null==$.cookies.get(baseUnID)?$(".loginAreaBefore").removeClass("undis"):$(".loginAreaAfter").removeClass("undis"))}}),define("lib/tizi_common/0.0.1/tizi_datatype",[],function(require,exports){exports.dataType=function(){var _type={URname:{datatype:"*2-20",nullmsg:"请输入真实姓名",errormsg:"长度2-20个字符"},Uname:{datatype:"/^[a-zA-Z]{1}\\w{5,17}$/",nullmsg:"请输入用户名",errormsg:"以英文字母开头，6-18个英文或数字"},Stuid:{datatype:"/^\\d{8,10}$/",nullmsg:"请输入学号",errormsg:"长度8-10个数字"},Username:{datatype:"e | *6-20",nullmsg:"请输入邮箱/手机号/用户名/学号",errormsg:"长度6-20个字符"},Email:{datatype:"e",nullmsg:"请输入邮箱地址",errormsg:"请输入正确的邮箱地址"},Phone:{datatype:"m",nullmsg:"请输入手机号码",errormsg:"请输入正确的手机号码"},PhoneCode:{datatype:"/^\\d{6}$/",datatype_allownull:"/^\\d{6}$/ | /^\\w{0}$/",nullmsg:"请输入验证码",errormsg:"验证码长度是6位"},CaptchaCode:{datatype:"/^\\w{4}$/",nullmsg:"请输入验证码",errormsg:"验证码长度是4位"},QQ:{datatype:"n5-12 | /^\\w{0}$/",datatype_nonull:"n5-12",nullmsg:"请输入QQ号码！",errormsg:"长度5-12个数字"},Passwd:{datatype:"*6-16",nullmsg:"请输入密码",errormsg:"长度6-16个字符之间",old_nullmsg:"请输入旧密码",re_nullmsg:"请再次输入密码",re_errormsg:"两次密码不一致！",new_nullmsg:"请输入新密码",re_new_nullmsg:"请再次输入新密码"},Dname:{datatype:"/^[a-zA-Z]{1}[a-zA-Z_0-9]{3,17}$/",nullmsg:"请输入个性域名",errormsg:"以英文字母开头，4-18个英文，数字或下划线"},Oname:{datatype:"*2-20",nullmsg:"请输入单位名称",errormsg:"长度2-20个字符"},Classname:{datatype:"*1-12",nullmsg:"请输入班级名称",errormsg:"长度1-12个字符"},Classnum:{datatype:"*6-8",nullmsg:"请输入班级编号",errormsg:"长度6-8个字符"},radioValid:{datatype:"*"}};return _type}}),define("lib/tizi_common/0.0.1/tizi_valid",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/artDialog/4.1.7/artDialog","lib/Validform/5.3.2/Validform","lib/tizi_common/0.0.1/tizi_datatype","lib/tizi_common/0.0.1/tizi_validform","tizi_ajax","md5","tiziDialog","cookies"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/artDialog/4.1.7/artDialog"),require("lib/Validform/5.3.2/Validform");var sDataType=require("lib/tizi_common/0.0.1/tizi_datatype").dataType();exports.indexLogin=function(callback_login){seajs.use("placeHolder",function(ex){ex.JPlaceHolder.init()});var _Form=$(".indexLoginForm").Validform({tiptype:function(msg,o){if(!o.obj.is("form")){var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg),o.obj.next().show();var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg);var infoObj=o.obj.next(".ValidformTips");2==o.type&&(infoObj.show(),o.obj.next().hide())}},showAllError:!1,beforeSubmit:function(curform){require.async("tizi_validform",function(ex){ex.md5(curform)})},ajaxPost:!0,callback:function(data){if(require("lib/tizi_common/0.0.1/tizi_validform").reset_md5(".indexLoginForm"),void 0==callback_login)if(data.errorcode)if($.tiziDialog.list.loginFormID&&$.tiziDialog.list.loginFormID.close(),"reload"==data.redirect)window.location.reload();else if("function"==data.redirect)"function"==typeof callbackfn?callbackfn():window.location.reload();else if("callback:"==data.redirect.substr(0,9)){var callback=data.redirect.substr(9);seajs.use("module/common/ajax/unlogin/"+callback)}else data.redirect&&(window.location.href=data.redirect);else require.async("tiziDialog",function(){$.tiziDialog({content:data.error})});else callback_login(data)}});_Form.addRule([{ele:".username",datatype:sDataType.Username.datatype,nullmsg:sDataType.Username.nullmsg,errormsg:sDataType.Username.errormsg},{ele:".password",datatype:sDataType.Passwd.datatype,nullmsg:sDataType.Passwd.nullmsg,errormsg:sDataType.Passwd.errormsg}])},exports.FeedbackCheck=function(){var varFeedbackCheck=$(".feedbackForm").Validform({tiptype:3,showAllError:!0,ajaxPost:!0,beforeSubmit:function(){return require("lib/tizi_common/0.0.1/tizi_validform").checkCaptcha("feedbackBox",1)},callback:function(data){require.async("tizi_commonajax",function(ex){ex.feedbacksubmit(data)})}});varFeedbackCheck.addRule([{ele:".contentTextarea",datatype:"*5-1000",nullmsg:"请填写反馈内容！",errormsg:"反馈内容5-1000个字符之间！"},{ele:".QQText",datatype:sDataType.QQ.datatype,errormsg:sDataType.QQ.errormsg},{ele:".QQTextUnlogin",datatype:sDataType.QQ.datatype_nonull,nullmsg:sDataType.QQ.nullmsg,errormsg:sDataType.QQ.errormsg},{ele:".textCaptcha",datatype:sDataType.CaptchaCode.datatype,nullmsg:sDataType.CaptchaCode.nullmsg,errormsg:sDataType.CaptchaCode.errormsg}])}});