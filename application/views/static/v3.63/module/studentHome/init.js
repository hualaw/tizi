define("module/studentHome/init",["module/common/basics/common/highlight","module/common/basics/common/valid","tizi_ajax","validForm","module/studentHome/share","tiziDialog","tizi_download","module/studentPractice/practice","module/common/method/common/tab"],function(require){require("module/common/basics/common/highlight").highlightMenu(),require("module/common/basics/common/valid").studentAddClass();var _share=require("module/studentHome/share");_share.downloadShare(),_share.love_share();var _practice=require("module/studentPractice/practice");_practice.setTab();var _tab=require("module/common/method/common/tab");_tab.stuPraticeTab($(".courseNav li.subject_n"),"stuOn",$(".practiceBox"))}),define("module/common/basics/common/highlight",[],function(require,exports){exports.highlightMenu=function(){void 0!=$("#wrapContent .mainContainer").attr("pagename")&&$("#slide .menu li").each(function(i){$("#wrapContent .mainContainer").attr("pagename")==$("#slide .menu li").eq(i).attr("name")&&$("#slide .menu li").eq(i).find("a").addClass("active")})}}),define("module/common/basics/common/valid",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/Validform/5.3.2/Validform"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/Validform/5.3.2/Validform"),exports.teacherClassNum_add=function(){var _Form=$(".addClassNumForm").Validform({tiptype:3,showAllError:!1,beforeSubmit:function(){},ajaxPost:!0,callback:function(data){require.async("module/common/ajax/teacherClass/classAjax",function(ex){ex.common(data)})}});_Form.addRule([{ele:".classNumInput",datatype:"*6-8",nullmsg:"请输入班级编号",errormsg:"长度6-8个字符"},{ele:".subjectInput",datatype:"*",nullmsg:"请选择学科",errormsg:"未选择学科"}])},exports.teacherClassNum_have=function(){var _Form=$(".haveClassNumForm").Validform({tiptype:3,showAllError:!1,beforeSubmit:function(){},ajaxPost:!0,callback:function(data){require.async("module/common/ajax/teacherClass/classAjax",function(ex){ex.common(data)})}});_Form.addRule([{ele:".classNumInput",datatype:"*6-8",nullmsg:"请输入班级编号",errormsg:"长度6-8个字符"},{ele:".subjectInput",datatype:"*",nullmsg:"请选择学科",errormsg:"未选择学科"}])},exports.studentAddClass=function(){var _Form=$(".studentAddClassForm").Validform({tiptype:function(msg,o){if(!o.obj.is("form")){var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg),o.obj.next().show();var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg);var infoObj=o.obj.next(".ValidformTips");2==o.type&&(infoObj.show(),o.obj.next().hide())}},showAllError:!1,beforeSubmit:function(curform){require.async("tizi_validform",function(ex){ex.md5(curform)})},ajaxPost:!0,callback:function(data){require.async("module/common/ajax/studentCommon/ajax",function(ex){ex.studentAddClass(data)})}});_Form.addRule([{ele:".classNum",datatype:"*6-8",nullmsg:"请输入班级编号",errormsg:"长度6-8个字符"}])}}),define("module/studentHome/share",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/artDialog/4.1.7/artDialog","lib/tizi_common/0.0.1/tizi_download","cookies","tizi_ajax","tiziDialog"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/artDialog/4.1.7/artDialog");var Teadownload=require("lib/tizi_common/0.0.1/tizi_download");exports.downloadShare=function(){$(".download_share").live("click",function(){var file_name=$(this).attr("file_name"),file_id=$(this).attr("file_id"),share_id=$(this).attr("share_id");$.tizi_ajax({url:baseUrlName+"teacher/cloud/download_verify",type:"POST",data:{file_id:file_id,file_name:file_name},dataType:"json",success:function(data){if(0==data.errorcode)$.tiziDialog({content:data.error});else if(1==data.file_type){var down_url=baseUrlName+"student/cloud/download?url="+data.file_path+"&file_name="+data.file_name+"&file_id="+data.file_id+"&share_id="+share_id;Teadownload.force_download(down_url,data.fname,!0)}else stu_force_download(data.url,data.fname,!0,!0,share_id)}})})};var stu_force_download=function(url,fname,openbox,is_qiniu,share_id){"undefined"==is_qiniu&&(url=url+"&session_id="+$.cookies.get(baseSessID));var ie_ver=ie_version();return 1==openbox||6==ie_ver||7==ie_ver||8==ie_ver?(fname=""==fname||void 0==fname?"是否下载？":"是否下载《"+fname+"》？",$.tiziDialog({content:fname,ok:null,icon:null,button:[{name:"点击下载",href:url,className:"aui_state_highlight clickDown",target:"_self"}]}),$(".clickDown").click(function(){1==is_qiniu&&$.tizi_ajax({url:baseUrlName+"student/cloud/add_download_count",type:"POST",data:{share_id:share_id},dataType:"json",success:function(){}})}),!1):(window.location.href=url,void 0)},ie_version=function(){var ie=$.browser.msie,version=$.browser.version;return ie?version:!1};exports.love_share=function(){$(".zan").live("click",function(){var share_id=$(this).attr("share_id"),that=$(this);$.tizi_ajax({url:baseUrlName+"student/cloud/love",type:"POST",dataType:"json",data:{share_id:share_id},success:function(json){if(1==json.errorcode){var love=Number(that.parents().find(".get_love").attr("value"))+1;that.parent().find(".get_love").text("获赞("+love+")"),that.remove()}else $.tiziDialog({content:json.error})},error:function(){$.tiziDialog({content:"系统繁忙，请稍后再试"})}})})}}),define("module/studentPractice/practice",[],function(require,exports){exports.setTab=function(){var url=window.location.href,result=url.match(new RegExp(".*([1-9])#([1-9]){1,2}$"));if(!result)return set_default_tab(),void 0;var grade_id="undefined"!=typeof result[1]?result[1]:null,subject_id="undefined"!=typeof result[2]?result[2]:null;if(!grade_id||!subject_id)return set_default_tab(),void 0;index=grade_id-1,$(".tabBox").find("a").removeClass("active"),$(".tabBox").find("a:eq("+index+")").addClass("active"),$(".praTabPar").removeClass("dis");var praTabPar=$(".praTabPar:eq("+index+")");praTabPar.addClass("dis"),subjectTab(praTabPar,subject_id)},set_default_tab=function(){$(".courseNav").find("li:eq(0)").addClass("stuOn"),$(".praTabPar:eq(0)").addClass("dis"),$(".practiceBox:eq(0)").addClass("dis")},subjectTab=function(praTabPar,subject_id){$(".courseNav").find("li").removeClass("stuOn");var courseNav=praTabPar.find(".s_"+subject_id);courseNav.addClass("stuOn");var subject_index=praTabPar.find("li").index(courseNav);$(".practiceBox").removeClass("dis"),praTabPar.find(".practiceBox:eq("+subject_index+")").addClass("dis")}}),define("module/common/method/common/tab",[],function(require,exports){exports.homePageTab=function(){$("#changeSubject a").live("click",function(){var obj=$(this),subject_type=obj.attr("sn"),area_id=$("#areaName").attr("area");$(this).addClass("active").siblings().removeClass("active"),$("#subjectName").attr("subject_type",obj.attr("sn")),$.tizi_ajax({url:baseUrlName+"paper/paper_exam/position?area_id="+area_id+"&stype_id="+subject_type,type:"GET",dataType:"json",success:function(data){$("#expos_list").html(data.html)}})})},exports.stuPraticeTab=function(clickObj,className,showObj){clickObj.click(function(){var index=clickObj.index($(this));clickObj!=$(".stuNav li")&&($(".courseNav li").removeClass("stuOn"),$(".exercises .practiceBox").removeClass("dis"),$(".courseNav:eq("+index+") li").eq(0).addClass("stuOn"),$(".exercises:eq("+index+") .practiceBox").eq(0).addClass("dis")),clickObj.removeClass(className),$(this).addClass(className),showObj.removeClass("dis"),showObj.eq(index).addClass("dis")})},exports.gradeTab=function(){var reg=new RegExp("^.*/([1-6]{1})"),key=window.location.href.match(reg);null!=key&&(index=key[1]-1,$(".stuNav").find("a").removeClass("active"),$(".stuNav").find("a:eq("+index+")").addClass("active"))},exports.subjectTab=function(){var reg=new RegExp("^.*#([1-9]{1})"),key=window.location.href.match(reg);null!=key&&(index=key[1],$(".courseNav").find(".s_"+index).click())},exports.Tab=function(tabTit,on,tabCon){$(tabCon).each(function(){$(this).children().eq(0).show().siblings().hide()}),$(tabTit).each(function(){$(this).children().eq(0).addClass(on)}),$(tabTit).children().click(function(){$(this).addClass(on).siblings().removeClass(on);var index=$(tabTit).children().index(this);$(tabCon).children().eq(index).show().siblings().hide()})},exports.homeworkTab=function(tabTit,on,tabCon){$(tabCon).each(function(){$(this).children().eq(0).show().siblings().hide()}),$(tabTit).each(function(){$(this).children().eq(0).addClass(on)}),$(tabTit).children().click(function(){$(this).addClass(on).siblings().removeClass(on);var index=$(tabTit).children().index(this);$(tabCon).children().eq(index).show().siblings().hide()})}});