define("module/parentChild/vaild",["lib/tizi_ajax/0.0.1/tizi_ajax","lib/Validform/5.3.2/Validform","lib/artDialog/4.1.7/artDialog","lib/tizi_common/0.0.1/tizi_datatype","lib/tizi_common/0.0.1/tizi_validform","tizi_ajax","md5","tiziDialog","cookies","module/common/ajax/parentChild/bindAjax"],function(require,exports){require("lib/tizi_ajax/0.0.1/tizi_ajax"),require("lib/Validform/5.3.2/Validform"),require("lib/artDialog/4.1.7/artDialog");var sDataType=require("lib/tizi_common/0.0.1/tizi_datatype").dataType();exports.bindChild=function(){var _Form=$(".bindChildForm").Validform({tiptype:function(msg,o){if(!o.obj.is("form")){var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg),o.obj.next().show();var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg);var infoObj=o.obj.next(".ValidformTips");2==o.type&&(infoObj.show(),o.obj.next().hide())}},ajaxPost:!0,showAllError:!1,beforeSubmit:function(curform){require.async("tizi_validform",function(ex){ex.md5(curform)})},callback:function(data){require("lib/tizi_common/0.0.1/tizi_validform").reset_md5(".bindChildForm"),require("module/common/ajax/parentChild/bindAjax").bindSubmit(data)}});_Form.addRule([{ele:".bindChildUname",datatype:sDataType.Uname.datatype,nullmsg:sDataType.Uname.nullmsg,errormsg:sDataType.Uname.errormsg},{ele:".bindChildPasswd",datatype:sDataType.Passwd.datatype,nullmsg:sDataType.Passwd.nullmsg,errormsg:sDataType.Passwd.errormsg}])},exports.bindCreatChild=function(){var _Form=$(".creatChildForm").Validform({tiptype:function(msg,o){if(!o.obj.is("form")){var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg),o.obj.next().show();var objtip=o.obj.next().find(".Validform_checktip");objtip.text(msg);var infoObj=o.obj.next(".ValidformTips");2==o.type&&(infoObj.show(),o.obj.next().hide())}},ajaxPost:!0,showAllError:!1,beforeSubmit:function(curform){return require("lib/tizi_common/0.0.1/tizi_validform").checkCaptcha("creatChildBox",1,1)?(require("lib/tizi_common/0.0.1/tizi_validform").md5(curform),void 0):!1},callback:function(data){require("lib/tizi_common/0.0.1/tizi_validform").reset_md5(".creatChildForm"),data.errorcode||require.async("tizi_validform",function(ex){ex.changeCaptcha("creatChildBox")}),require("module/common/ajax/parentChild/bindAjax").bindSubmit(data)}});_Form.addRule([{ele:".creatChildUname",datatype:sDataType.Uname.datatype,nullmsg:sDataType.Uname.nullmsg,errormsg:sDataType.Uname.errormsg},{ele:".creatChildPasswd",datatype:sDataType.Passwd.datatype,nullmsg:sDataType.Passwd.nullmsg,errormsg:sDataType.Passwd.errormsg},{ele:".recreatChildPasswd",datatype:sDataType.Passwd.datatype,nullmsg:sDataType.Passwd.re_nullmsg,errormsg:sDataType.Passwd.re_errormsg},{ele:".creatChildURname",datatype:sDataType.URname.datatype,nullmsg:sDataType.URname.nullmsg,errormsg:sDataType.URname.errormsg},{ele:".creatGrade",datatype:"*",nullmsg:"年级不能为空",errormsg:"请选择年级"},{ele:".creatChildBoxWord",datatype:sDataType.CaptchaCode.datatype,nullmsg:sDataType.CaptchaCode.nullmsg,errormsg:sDataType.CaptchaCode.errormsg}])},exports.parLogin=function(){$(".bindChildBtn").click(function(){alert("登录")})},exports.cancelBind=function(){$(".cancelBind>a").live("click",function(){var kid=$(this).parents(".cancelBind").attr("kid"),kidname=$(this).parents(".cancelBind").attr("kidname"),fresh=!1;$.tiziDialog({title:"解除绑定",content:"确定要取消绑定<span class='cancelName'>"+kidname+"</span>的账号？",ok:function(){$.tizi_ajax({url:baseUrlName+"login/register/child_unbind",type:"POST",data:{kid:kid,ver:(new Date).valueOf()},dataType:"json",success:function(data){data.errorcode&&(fresh=!0),$.tiziDialog({title:"解除绑定",content:data.error,ok:function(){},close:function(){fresh&&window.location.reload()}})}})},cancel:!0})})}}),define("module/common/ajax/parentChild/bindAjax",["lib/artDialog/4.1.7/artDialog"],function(require,exports){require("lib/artDialog/4.1.7/artDialog"),exports.bindSubmit=function(data){data.errorcode?data.redirect&&(window.location.href=data.redirect):$.tiziDialog({content:data.error})}});